// FOR ORG VERSION
USE ROLE <% ctx.env.finops_db_admin_role%>;
USE DATABASE <% ctx.env.finops_acct_db %>;
USE SCHEMA <% ctx.env.finops_acct_schema %>;

CREATE TRANSIENT TABLE TABLE_STORAGE_DETAILED_ORG IF NOT EXISTS (
    ACCOUNT_LOCATOR VARCHAR,
    REGION VARCHAR(1000),
    ACCOUNT_NAME VARCHAR,
    TABLE_ID NUMBER(38, 0),
    CLONE_GROUP_ID NUMBER(38, 0),
    IS_CLONE BOOLEAN,
    TABLE_CATALOG VARCHAR(512),
    TABLE_SCHEMA VARCHAR(512),
    TABLE_NAME VARCHAR(512),
    TABLE_COPY_COUNT NUMBER(18, 0),
    TABLE_TYPE VARCHAR(512),
    IS_TRANSIENT VARCHAR(3),
    TABLE_CREATED TIMESTAMP_LTZ(6),
    LAST_ALTERED TIMESTAMP_LTZ(6),
    LAST_DDL TIMESTAMP_LTZ(6),
    LAST_DDL_BY VARCHAR(100),
    AUTO_CLUSTERING_ON VARCHAR(3),
    DB_DROPPED TIMESTAMP_LTZ(6),
    DB_RETENTION_DAYS_DEFAULT NUMBER(4, 0),
    SCHEMA_DROPPED TIMESTAMP_LTZ(6),
    SCHEMA_RETENTION_DAYS_DEFAULT NUMBER(4, 0),
    TABLE_DROPPED TIMESTAMP_LTZ(6),
    TABLE_RENTENTION_DAYS NUMBER(4, 0),
    TABLE_ENTERED_FAILSAFE TIMESTAMP_LTZ(6),
    TABLE_DROP_OFF_DATE TIMESTAMP_LTZ(9),
    TABLE_ACTIVE_LIFESPAN_DAYS NUMBER(9, 0),
    TABLE_PASSIVE_LIFESPAN_DAYS NUMBER(9, 0),
    ROW_COUNT NUMBER(38, 0),
    ACTIVE_BYTES NUMBER(38, 0),
    TIME_TRAVEL_BYTES NUMBER(38, 0),
    FAILSAFE_BYTES NUMBER(38, 0),
    RETAINED_FOR_CLONE_BYTES NUMBER(38, 0),
    TOTAL_BYTES NUMBER(38, 0),
    DATE_COLLECTED TIMESTAMP_LTZ(9)
);
